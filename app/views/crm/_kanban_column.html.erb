<%
  # ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ Ñ†Ð²ÐµÑ‚ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸ Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°
  column_colors = {
    'new_lead' => 'bg-gray-50 border-gray-300',
    'contacted' => 'bg-blue-50 border-blue-300',
    'qualified' => 'bg-purple-50 border-purple-300',
    'interested' => 'bg-yellow-50 border-yellow-300',
    'payment_pending' => 'bg-orange-50 border-orange-300',
    'paid_status' => 'bg-green-50 border-green-300',
    'inactive' => 'bg-red-50 border-red-300'
  }

  column_header_colors = {
    'new_lead' => 'text-gray-700',
    'contacted' => 'text-blue-700',
    'qualified' => 'text-purple-700',
    'interested' => 'text-yellow-700',
    'payment_pending' => 'text-orange-700',
    'paid_status' => 'text-green-700',
    'inactive' => 'text-red-700'
  }

  status_labels = {
    'new_lead' => 'ðŸ†• ÐÐ¾Ð²Ñ‹Ð¹ Ð»Ð¸Ð´',
    'contacted' => 'ðŸ“ž Ð¡Ð²ÑÐ·Ð°Ð»Ð¸ÑÑŒ',
    'qualified' => 'âœ… ÐšÐ²Ð°Ð»Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½',
    'interested' => 'ðŸ’Ž Ð˜Ð½Ñ‚ÐµÑ€ÐµÑÑƒÐµÑ‚ÑÑ',
    'payment_pending' => 'â³ ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾Ð¿Ð»Ð°Ñ‚Ñƒ',
    'paid_status' => 'ðŸ’° ÐžÐ¿Ð»Ð°Ñ‚Ð¸Ð»',
    'inactive' => 'ðŸ˜´ ÐÐµÐ°ÐºÑ‚Ð¸Ð²ÐµÐ½'
  }
%>

<div class="flex-shrink-0 w-72" data-column-wrapper>
  <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸ -->
  <div class="<%= column_colors[status] %> rounded-t-lg border-t-4 px-4 py-3 bg-white">
    <div class="flex items-center justify-between">
      <h3 class="font-bold <%= column_header_colors[status] %> text-sm">
        <%= status_labels[status] %>
      </h3>
      <span class="<%= column_header_colors[status] %> font-semibold text-sm px-2 py-1 rounded-full bg-gray-100 shadow-sm" data-column-count>
        <%= users&.length || 0 %>
      </span>
    </div>
  </div>

  <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐµÐº -->
  <div class="kanban-column <%= column_colors[status] %> border-x border-b rounded-b-lg p-4 pt-6 min-h-[500px] max-h-[calc(100vh-200px)] overflow-y-auto space-y-4 transition-colors"
       data-kanban-target="column"
       data-status="<%= status %>">
    <% users&.each do |user| %>
      <%= render 'crm/user_card', user: user %>
    <% end %>
  </div>
</div>
